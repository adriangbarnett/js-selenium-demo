
<html lang="en">

    <head id="head">
        <%- include('./include/head.ejs') %>
        <link href="/css/styles.css" rel="stylesheet">
        <script defer language="JavaScript" type="text/javascript" src="/index.js"></script>
        <title id="title">List</title>
    </head>

    <body id="bodyElement">

        <h1><%=heading1%></h1>

        <div id="divmessage" class="div-box">
            <p id="code">Code: <%=code%></p>
            <p id="message">Message: <%=message%></p>
            <a id="e404" class="btn btn-sm btn-dark tableRowButtons" href="/junk">Show 404 page</a>
        </div>


        <div id="divadd" class="div-box">
            <form id="formAdd" action="/add" method="post">
                <input id="inputUsername" class="" type="text" name="username" placeholder="username" autocomplete="off" value="<%=username%>">
                <input id="inputEmail" class="" name="email" type="text" placeholder="email" autocomplete="off" value="<%=email%>">
                <input id="inputCounter" class="" name="counter" type="number" min="0" max="9999" step="1" autocomplete="off" value="<%=counter%>">
                <input id="inputImage" class="" name="image" type="text"  autocomplete="off" placeholder="./img/0.png" value="<%=image%>">
                <button id="buttonAdd" class="btn btn-sm btn-success" type="submit" form="formAdd">Add</button>
            </form>
        </div>
 
        <div id="divdb" class="div-box">

            <form id="formFilter" action="/filter" method="post">
                <input id="filter" class="filter" type="text" name="filter" placeholder="filter by value" autocomplete="off" value="<%=filter%>">
                <button id="search" class="btn btn-sm btn-primary" type="submit" form="filter">Filter</button>
                <a id="buttonClear" class="btn btn-sm btn-light" href="/">Clear</a>
            </form>

            <% let count; if (list) { count = list.length } else { count = 0; } %>
            <p id="userCount"><%=count%> user(s)</p>

            <div id="divActionButtons" class="actionButtons">
                <a href="/removeall" id="removeall" class="btn btn-sm btn-danger">Delete all</a>
                <a href="/generate" id="add" class="btn btn-sm btn-warning">Add Random</a>
            </div>

            <table id="table">
                <thead id="tablehead">
                    <th>dbid</th>
                    <th>id</th>
                    <th>username</th>
                    <th>email</th>
                    <th>date</th>
                    <th>counter</th>
                    <th>token</th>
                    <th>icon</th>
                    <th>actions</th>
                </thead>
                <tbody id="tableBody">
                <% if(list) { %>
                    <% for(i=0; i!=list.length; i++) { %>
                        <% dt = list[i].date %>
                            <tr id="row_<%=i%>">
                                <td><%=list[i].dbid%></td>
                                <td><%=list[i].id%></td>
                                <td><%=list[i].username%></td>
                                <td><%=list[i].email%></td>
                                <td ><%=dt%></td>
                                <td><%=list[i].counter%></td>
                                <td><%=list[i].token%></td>
                                <td><img id="img_<%=list[i].image%>" class="pointer tableIcon" src="<%=list[i].image%>" onclick="window.open(this.src, '_blank');"><%=list[i].image%></td>
                                <td>
                                    <a id="remove<%=list[i].id%>" class="btn btn-sm btn-danger tableRowButtons" href="/remove?id=<%=list[i].id%>">Delete</a>
                                    <!-- <a id="edit<%=list[i].id%>" class="btn btn-sm btn-dark tableRowButtons" href="/edit?id=<%=list[i].id%>">Edit</a> -->
                                    <a id="update<%=list[i].id%>" class="btn btn-sm btn-warning tableRowButtons" href="/randomupdate?id=<%=list[i].id%>">Random Update</a>
                                </td>
                                
                            </tr>
                        <% } %>
                    <% } %>
    
                </tbody>
            </table>


        </div>




        
    </body>

    

</html>